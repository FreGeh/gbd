<!DOCTYPE html>

<html lang="en">
<head>
    <title>GBD Benchmark Database</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='main.css') }}" />
    <script src="{{ url_for('static', filename='jquery-3.6.0.min.js') }}"></script>
    <script src="{{ url_for('static', filename='sorttable.js') }}"></script>
    <script src="{{ url_for('static', filename='w3.js') }}"></script>
</head>

<body>
<div class="main">
    <header>
        <img center src="{{ url_for('static', filename='img/gbd_logo_small.png') }}" alt="GBD-Logo">
        <form method="post">
            <fieldset>
                <legend>Filter for specific instances:</legend>
                <input type="text" name="query" class="query" placeholder="Query for Instances" value="{{ query }}">
            </fieldset>
            <fieldset>
                <legend>Select feature database for display:</legend>
                {% for dbname in databases %}
                    {% if dbname == selected %}
                    <input type="radio" id="{{ dbname }}" name="selected_db" value="{{ dbname }}" checked>
                    {% else %}
                    <input type="radio" id="{{ dbname }}" name="selected_db" value="{{ dbname }}">
                    {% endif %}
                    <label for="{{ dbname }}"><a href="{{ url_for('get_database_file', database=dbname) }}">{{ dbname }}</a></label>
                {% endfor %}
            </fieldset>
            <button onclick="w3.hide('.info'); w3.show('#query')" type="submit" class="submit" formaction="/">Show Instances and Features</button>
            <button onclick="w3.hide('.info'); w3.show('#download')" type="submit" class="submit" formaction="/getinstances">Download Instances (URIs)</button>
            <button onclick="w3.hide('.info')" type="submit" class="submit" formaction="/exportcsv">Download Features (CSVs)</button>
        </form>
        <div>
        <div class="shortcuts">
            Or use one of the following predefined query shortcuts: 
            <ul>
                <li><a href="{{ url_for('quick_search', track='main_2022') }}">Main 2022</a></li>
                <li><a href="{{ url_for('quick_search', track='anni_2022') }}">Anniversary 2022</a></li>
            </ul>
        </div>
        </div>
    </header>
    
    <div class="content">
        <table class="sortable">
            <tr>
                <th>hash</th>
                {% for feature in features %}
                <th>{{ feature }}</th>
                {% endfor %}
            </tr>
            
            {% for row in result %}
            <tr>
                {% for item in row %}
                <td>{{ item }}</td>
                {% endfor %}
            </tr>
            {% endfor %}
        </table>
    </div>

    <footer>
        <div class="info" id="query" style="display:block; float:left">
            Status: Found {{ result | length }} Benchmarks
        </div>
        <div class="info" id="download">
            Status: The downloaded file contains the benchmark URIs. Use for example <b>wget --content-disposition -i filename.uri</b> for downloading them. 
        </div>
        <div style="float: right;">
            If you find this useful, please cite: <a href="https://easychair.org/publications/paper/jQXv">A Problem Meta-Data Library for Research in SAT</a>
        </div>
    </footer>
</div>
</body>
</html>
